/**
 * Minified by jsDelivr using UglifyJS v3.1.10.
 * Original file: /npm/responsivevoice@0.4.1/responsivevoice.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var responsiveVoice={};!function(){function e(){"undefined"==typeof speechSynthesis?n():setTimeout(function(){var e=setInterval(function(){var t=window.speechSynthesis.getVoices();0!=t.length||null!=o&&0!=o.length?(console.log("Voice support ready"),clearInterval(e),o=t,a(),null!=i.OnVoiceReady&&i.OnVoiceReady.call()):(console.log("Voice support NOT ready"),++u>s&&(clearInterval(e),n()))},100)},100)}function n(){m=!0,console.log("Voice not supported. Using fallback mode"),a(),null!=i.OnVoiceReady&&i.OnVoiceReady.call()}function a(){for(var e=0;e<r.length;e++)for(var n=r[e],a=0;a<n.voiceIDs.length;a++){var l=c[n.voiceIDs[a]];if(1==l.fallbackvoice){n.mappedProfile={systemvoice:{},collectionvoice:l},console.log("Mapped "+n.name+" to "+l.lang+" fallback voice");break}var o=t(l.name);if(null!=o){n.mappedProfile={systemvoice:o,collectionvoice:l},console.log("Mapped "+n.name+" to "+o.name);break}}}function t(e){if(void 0===o)return null;for(var n=0;n<o.length;n++)if(o[n].name==e)return o[n];return null}function l(e){for(var n=0;n<r.length;n++)if(r[n].name==e)return r[n];return null}var o,i=this,r=[{name:"UK English Female",voiceIDs:[3,5,1,6,7,8]},{name:"UK English Male",voiceIDs:[0,4,2,6,7,8]},{name:"US English Female",voiceIDs:[39,40,41,42,43,44]},{name:"Spanish Female",voiceIDs:[19,16,17,18,20,15]},{name:"French Female",voiceIDs:[21,22,23,26]},{name:"Deutsch Female",voiceIDs:[27,28,29,30,31,32]},{name:"Italian Female",voiceIDs:[33,34,35,36,37,38]},{name:"Hungarian Female",voiceIDs:[9,10,11]},{name:"Serbian Male",voiceIDs:[12]},{name:"Croatian Male",voiceIDs:[13]},{name:"Bosnian Male",voiceIDs:[14]},{name:"Fallback UK Female",voiceIDs:[8]}],c=[{name:"Google UK English Male"},{name:"Agnes"},{name:"Daniel Compact"},{name:"Google UK English Female"},{name:"en-GB",rate:.5,pitch:1},{name:"en-AU",rate:.5,pitch:1},{name:"inglés Reino Unido"},{name:"English United Kingdom"},{name:"Fallback en-GB Female",lang:"en-GB",fallbackvoice:!0},{name:"Eszter Compact"},{name:"hu-HU",rate:.4},{name:"Fallback Hungarian",lang:"hu",fallbackvoice:!0},{name:"Fallback Serbian",lang:"sr",fallbackvoice:!0},{name:"Fallback Croatian",lang:"hr",fallbackvoice:!0},{name:"Fallback Bosnian",lang:"bs",fallbackvoice:!0},{name:"Fallback Spanish",lang:"es",fallbackvoice:!0},{name:"Spanish Spain"},{name:"español España"},{name:"Diego Compact",rate:.3},{name:"Google Español"},{name:"es-ES",rate:.3},{name:"Google Français"},{name:"French France"},{name:"francés Francia"},{name:"Virginie Compact",rate:.5},{name:"fr-FR",rate:.5},{name:"Fallback French",lang:"fr",fallbackvoice:!0},{name:"Google Deutsch"},{name:"German Germany"},{name:"alemán Alemania"},{name:"Yannick Compact",rate:.5},{name:"de-DE",rate:.5},{name:"Fallback Deutsch",lang:"de",fallbackvoice:!0},{name:"Google Italiano"},{name:"Italian Italy"},{name:"italiano Italia"},{name:"Paolo Compact",rate:.5},{name:"it-IT",rate:.5},{name:"Fallback Italian",lang:"it",fallbackvoice:!0},{name:"Google US English"},{name:"English United States"},{name:"inglés Estados Unidos"},{name:"Vicki"},{name:"en-US",rate:.5},{name:"Fallback English",lang:"en-US",fallbackvoice:!0}],s=5,u=0,m=!1;this.fallback_playing=!1,this.fallback_parts=null,this.fallback_part_index=0,this.fallback_audio=null,i.msgparameters=null,i.timeoutId=null,i.WORDS_PER_MINUTE=130,i.debug=!1,"undefined"!=typeof speechSynthesis&&(speechSynthesis.onvoiceschanged=function(){o=window.speechSynthesis.getVoices(),null!=i.OnVoiceReady&&i.OnVoiceReady.call()}),this.default_rv=r[0],this.OnVoiceReady=null,"undefined"==typeof $?document.addEventListener("DOMContentLoaded",function(){e()}):$(document).ready(function(){e()}),i.log=function(e){i.debug&&console.log(e)},this.getVoices=function(){for(var e=[],n=0;n<r.length;n++)e.push({name:r[n].name});return e},this.speak=function(e,n,a){e=e.replace(/[\"\`]/gm,"'"),i.msgparameters=a||{},i.msgtext=e,i.msgvoicename=n,i.onstartFired=!1;var o=[];if(e.length>100){for(var r=e;r.length>100;){var s=r.search(/[:!?.;]+/),u="";if((-1==s||s>=100)&&(s=r.search(/[,]+/)),-1==s||s>=100)for(var f=r.split(" "),d=0;d<f.length&&!(u.length+f[d].length+1>100);d++)u+=(0!=d?" ":"")+f[d];else u=r.substr(0,s+1);r=r.substr(u.length,r.length-u.length),o.push(u)}r.length>0&&o.push(r)}else o.push(e);var g,h={};if(null!=(g=null==n?i.default_rv:l(n)).mappedProfile)h=g.mappedProfile;else if(h.systemvoice=function(e){for(var n=0;n<e.voiceIDs.length;n++){var a=t(c[e.voiceIDs[n]].name);if(null!=a)return a}return null}(g),h.collectionvoice={},null==h.systemvoice)return void console.log("ERROR: No voice found for: "+n);i.msgprofile=h,1==h.collectionvoice.fallbackvoice?(m=!0,i.fallback_parts=[]):m=!1;for(d=0;d<o.length;d++)if(m){var p="http://www.corsproxy.com/translate.google.com/translate_tts?ie=UTF-8&q="+o[d]+"&tl="+h.collectionvoice.lang||h.systemvoice.lang||"en-US",v=new Audio(p);v.playbackRate=1,v.preload="auto",v.volume=h.collectionvoice.volume||h.systemvoice.volume||1,i.fallback_parts.push(v)}else{var y=new SpeechSynthesisUtterance;y.voice=h.systemvoice,y.voiceURI=h.systemvoice.voiceURI,y.volume=h.collectionvoice.volume||h.systemvoice.volume||1,y.rate=h.collectionvoice.rate||h.systemvoice.rate||1,y.pitch=h.collectionvoice.pitch||h.systemvoice.pitch||1,y.text=o[d],y.lang=h.collectionvoice.lang||h.systemvoice.lang,0==d&&(y.onstart=i.speech_onstart),i.msgparameters.onendcalled=!1,null!=a?(d<o.length-1&&o.length>1||(y.onend=i.speech_onend,y.hasOwnProperty("addEventListener")&&y.addEventListener("end",i.speech_onend)),y.onerror=a.onerror||function(e){i.log("RV: Unknow Error"),i.log(e)}):(i.log("No Params received for current Utterance"),y.onend=i.speech_onend,y.onerror=function(e){i.log("RV: Unknow Error"),i.log(e)}),i.cancelled=!1,speechSynthesis.speak(y)}m&&i.fallback_startPlaying()},this.fallback_startPlaying=function(){i.fallback_part_index=0,i.fallback_finishedplaying()},this.fallback_finishedplaying=function(e){i.fallback_audio=i.fallback_parts[i.fallback_part_index],i.fallback_audio.play(),i.fallback_part_index++,i.fallback_part_index<i.fallback_parts.length&&i.fallback_audio.addEventListener("ended",i.fallback_finishedplaying)},this.cancel=function(){i.checkAndCancelTimeout(),m?i.fallback_audio.pause():i.cancelled=!0,speechSynthesis.cancel()},this.voiceSupport=function(){return"speechSynthesis"in window},i.numToWords=function(e){var n=function(){return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,n){var a=[],t=!0,l=!1,o=void 0;try{for(var i,r=e[Symbol.iterator]();!(t=(i=r.next()).done)&&(a.push(i.value),!n||a.length!==n);t=!0);}catch(e){l=!0,o=e}finally{try{!t&&r.return&&r.return()}finally{if(l)throw o}}return a}(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(e){return Number(e)||0},t=function(e){return 0===e.length},l=function(e){return function(n){return function(a){return e(n(a))}}},o=["","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen"],r=["","","twenty","thirty","forty","fifty","sixty","seventy","eighty","ninety"],c=["","thousand","million","billion","trillion","quadrillion","quintillion","sextillion","septillion","octillion","nonillion"];return"number"==typeof e?i.numToWords(String(e)):"0"===e?"zero":l(function e(n){return function(a){return t(a)?[]:[function(e){return function(n){return n.slice(0,e)}}(n)(a)].concat(function(e){if(Array.isArray(e)){for(var n=0,a=Array(e.length);n<e.length;n++)a[n]=e[n];return a}return Array.from(e)}(e(n)(function(e){return function(n){return n.slice(e)}}(n)(a))))}}(3))(function(e){return e.slice(0).reverse()})(function(e){return Array.from(e)}(e)).map(function(e){var t=n(e,3),l=t[0],i=t[1],c=t[2];return[0===a(c)?"":o[c]+" hundred ",0===a(l)?r[i]:r[i]&&r[i]+" "||"",o[i+l]||o[l]].join("")}).map(function(e,n){return""===e?e:e+" "+c[n]}).filter(l(function(e){return!e})(t)).reverse().join(" ").trim()},i.getWords=function(e){var n,a=e.split(/(\s*[\s,]\s*|\?|;|:|\.|\(|\)|!)/);a=a.filter(function(e){return/[^\s]/.test(e)});for(var t=0;t<a.length;t++)null!=(n=a[t].toString().match(/\d+/))&&(a.splice(t,1),i.numToWords(+n[0]).split(/\s+/).map(function(e){a.push(e)}));return a},i.getEstimatedTimeLength=function(e,n){var a=i.getWords(e),t=0,l=m?1300:700,n=n||1;a.map(function(e,n){t+=(e.toString().match(/[^ ]/gim)||e).length});var o=a.length,r=1e3*n*(60/i.WORDS_PER_MINUTE)*o;return o<5&&(r=n*(l+50*t)),i.log("Estimated time length: "+r+" ms, words: ["+a+"], charsCount: "+t),r},i.startTimeout=function(e,n){var a=i.msgprofile.collectionvoice.timerSpeed;null==i.msgprofile.collectionvoice.timerSpeed&&(a=1),a<=0||(i.timeoutId=setTimeout(n,i.getEstimatedTimeLength(e,a)),i.log("Timeout ID: "+i.timeoutId,e))},i.isPlaying=function(){return i.fallbackMode?null!=i.fallback_audio&&!i.fallback_audio.ended&&!i.fallback_audio.paused:speechSynthesis.speaking},i.checkAndCancelTimeout=function(){null!=i.timeoutId&&(clearTimeout(i.timeoutId),i.timeoutId=null)},i.speech_timedout=function(){i.cancel(),i.cancelled=!1,i.speech_onend()},i.speech_onstart=function(){i.onstartFired=!0,i.log("Speech start"),i.fallbackMode||i.startTimeout(i.msgtext,i.speech_timedout),i.msgparameters.onendcalled=!1,null!=i.msgparameters&&null!=i.msgparameters.onstart&&i.msgparameters.onstart()},i.speech_onend=function(){i.checkAndCancelTimeout(),!0!==i.cancelled?(i.log("on end fired"),null!=i.msgparameters&&null!=i.msgparameters.onend&&1!=i.msgparameters.onendcalled&&(i.log("Speech on end called  -"+i.msgtext),i.msgparameters.onendcalled=!0,i.isPlaying()?console.log("still talking"):i.msgparameters.onend())):i.cancelled=!1},this.OnFinishedPlaying=function(e){null!=i.msgparameters&&null!=i.msgparameters.onend&&i.msgparameters.onend()},this.setDefaultVoice=function(e){var n=l(e);null!=n&&(i.default_vr=n)}}(),module.exports=responsiveVoice;
//# sourceMappingURL=/sm/d6d4c5fa1e3ff2a41e2231a25ef1fa391c8a27a806ac5fde2479b6e7ab934fbf.map
